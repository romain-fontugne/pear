{% extends 'base.html' %}

{% block head %}
<title>AS{{}}</title>
{% endblock %}

{% block body %}
<h1>AS{{}}</h1>

<h2>Traffic breakdown{{}}</h2>
<table id="trafficTable" class="table table-striped table-sm table-hover" width="100%">
    <thead>
    <tr>
        <th>Prefix</th>
        <th>Traffic Volume</th>
        <th>Country</th>
        <th>AS path</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    {% for prefix, info in flows.items() %}
        <tr>
            <td>{{ prefix }}</td>
            <td>{{ info.vol }}</td>
            <td>{{ info.country }}</td>
            <td>
                {% for asn in info.aspath %}
                    AS{{ asn }}
                {% endfor %}
            </td>
            <td>{{ info.irr.descr }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}

{% block footer %}
<script type="text/javascript">
    $(document).ready(function () {
        $('#trafficTable').DataTable({
            "paging": false,
            "fnInitComplete": function () {
                var myCustomScrollbar = document.querySelector('#trafficTable_wrapper .dataTables_scrollBody');
                var ps = new PerfectScrollbar(myCustomScrollbar);
            },
            "scrollY": 850,
        });
    $('.dataTables_length').addClass('bs-select');
    });
</script>
{% endblock %}
